{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USUARIO\\\\Documents\\\\GitHub\\\\Cloud-Proyecto-0-\\\\frontend_\\\\src\\\\registrarse.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useState } from \"react\";\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport Row from 'react-bootstrap/esm/Row';\nimport Col from 'react-bootstrap/esm/Col';\nimport Button from 'react-bootstrap/Button';\nimport ImageUploading from \"react-images-uploading\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Registro() {\n  _s();\n  /* Código para subir la imagen tomado de la documentación de npm\r\n  https://www.npmjs.com/package/react-images-uploading\r\n  */\n\n  const [images, setImages] = useState([]);\n  const [new_user, setNewU] = useState([]);\n  const [new_pass, setNewP] = useState([]);\n  const maxNumber = 1;\n  const onChange = async imageList => {\n    try {\n      if (imageList.length > 0) {\n        const image = imageList[0];\n        const formData = new FormData();\n        const extension = image.file.name.split('.').pop().toLowerCase();\n\n        // Verificar si la extensión es válida\n        if (['jpg', 'jpeg', 'png', 'gif', 'img'].includes(extension)) {\n          formData.append('image', image.file, `${new_user}.${extension}`);\n        } else {\n          console.error('Formato de archivo no permitido');\n          return;\n        }\n\n        // Enviar la imagen al servidor y guardarla en la carpeta 'images' dentro de 'public'\n        const response = await axios.post('http://localhost:5000/foto', formData);\n\n        // Lograr la respuesta del servidor\n        console.log('Response:', response);\n\n        // Establecer las imágenes\n        setImages(extension);\n      }\n    } catch (error) {\n      console.error('Error uploading image:', error);\n    }\n  };\n  const handleNUserChange = event => {\n    setNewU(event.target.value);\n    console.log(event.target.value);\n  };\n  const handleNPassChange = event => {\n    setNewP(event.target.value);\n    console.log(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(Row, {\n    children: [/*#__PURE__*/_jsxDEV(Col, {\n      children: /*#__PURE__*/_jsxDEV(InputGroup, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(InputGroup.Text, {\n          id: \"basic-addon1\",\n          children: \"@\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          placeholder: \"Nuevo nombre de usuario\",\n          \"aria-label\": \"Username\",\n          \"aria-describedby\": \"basic-addon1\",\n          onChange: handleNUserChange,\n          value: new_user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Col, {\n      children: /*#__PURE__*/_jsxDEV(InputGroup, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(InputGroup.Text, {\n          id: \"basic-addon1\",\n          children: \"P\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          placeholder: \"Nueva contrase\\xF1a\",\n          \"aria-label\": \"Password\",\n          \"aria-describedby\": \"basic-addon1\",\n          type: \"password\",\n          onChange: handleNPassChange,\n          value: new_pass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Col, {\n      children: /*#__PURE__*/_jsxDEV(ImageUploading, {\n        multiple: true,\n        value: images,\n        onChange: onChange,\n        maxNumber: maxNumber,\n        dataURLKey: \"data_url\",\n        children: ({\n          imageList,\n          onImageUpload,\n          onImageRemoveAll,\n          onImageUpdate,\n          onImageRemove,\n          isDragging,\n          dragProps\n        }) =>\n        /*#__PURE__*/\n        // write your building UI\n        _jsxDEV(\"div\", {\n          className: \"upload__image-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onImageUpload,\n            ...dragProps,\n            children: \"Cargue su imagen de perfil\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Col, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        size: \"m\",\n        onClick: async () => {\n          var im = `/imagenes/${new_user}.${images}`;\n          if (`${images}` === \"\") {\n            im = `/imagenes/default.jpg`;\n          }\n          const response = await fetch(\"http://localhost:5000/usuario\", {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              \"nombre\": new_user,\n              \"contrasena\": new_pass,\n              \"imagen\": im\n            })\n          });\n          if (response.ok) {\n            console.log('Registrado');\n          } else {\n            alert('Seleccione otro nombre de usuario, ese ya se encuentra en nuestro sistema');\n          }\n        },\n        children: \"Registrase\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}\n_s(Registro, \"i9t9nQlL+ibo29nXLsBG5iJA5eo=\");\n_c = Registro;\nexport default Registro;\nvar _c;\n$RefreshReg$(_c, \"Registro\");","map":{"version":3,"names":["React","useState","Form","InputGroup","Row","Col","Button","ImageUploading","axios","jsxDEV","_jsxDEV","Registro","_s","images","setImages","new_user","setNewU","new_pass","setNewP","maxNumber","onChange","imageList","length","image","formData","FormData","extension","file","name","split","pop","toLowerCase","includes","append","console","error","response","post","log","handleNUserChange","event","target","value","handleNPassChange","children","className","Text","id","fileName","_jsxFileName","lineNumber","columnNumber","Control","placeholder","type","multiple","dataURLKey","onImageUpload","onImageRemoveAll","onImageUpdate","onImageRemove","isDragging","dragProps","onClick","variant","size","im","fetch","method","mode","headers","body","JSON","stringify","ok","alert","_c","$RefreshReg$"],"sources":["C:/Users/USUARIO/Documents/GitHub/Cloud-Proyecto-0-/frontend_/src/registrarse.js"],"sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport Form from 'react-bootstrap/Form';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\nimport Row from 'react-bootstrap/esm/Row';\r\nimport Col from 'react-bootstrap/esm/Col';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ImageUploading from \"react-images-uploading\";\r\nimport axios from 'axios';\r\n\r\nfunction Registro() {\r\n\r\n    /* Código para subir la imagen tomado de la documentación de npm\r\n    https://www.npmjs.com/package/react-images-uploading\r\n    */\r\n\r\n    const [images, setImages] = useState([]);\r\n    const [new_user, setNewU] = useState([]);\r\n    const [new_pass, setNewP] = useState([]);\r\n\r\n\r\n    const maxNumber = 1;\r\n\r\n    const onChange = async (imageList) => {\r\n        try {\r\n            if (imageList.length > 0) {\r\n                const image = imageList[0];\r\n\r\n                const formData = new FormData();\r\n                const extension = image.file.name.split('.').pop().toLowerCase();\r\n\r\n                // Verificar si la extensión es válida\r\n                if (['jpg', 'jpeg', 'png', 'gif', 'img'].includes(extension)) {\r\n                    formData.append('image', image.file, `${new_user}.${extension}`);\r\n                } else {\r\n                    console.error('Formato de archivo no permitido');\r\n                    return;\r\n                }\r\n\r\n                // Enviar la imagen al servidor y guardarla en la carpeta 'images' dentro de 'public'\r\n                const response = await axios.post('http://localhost:5000/foto', formData);\r\n\r\n                // Lograr la respuesta del servidor\r\n                console.log('Response:', response);\r\n\r\n                // Establecer las imágenes\r\n                setImages(extension);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error uploading image:', error);\r\n        }\r\n    };\r\n\r\n    const handleNUserChange = (event) => {\r\n        setNewU(event.target.value);\r\n        console.log(event.target.value);\r\n    }\r\n\r\n    const handleNPassChange = (event) => {\r\n        setNewP(event.target.value);\r\n        console.log(event.target.value);\r\n    }\r\n\r\n    return (\r\n        <Row>\r\n            <Col>\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Text id=\"basic-addon1\">@</InputGroup.Text>\r\n                    <Form.Control\r\n                        placeholder=\"Nuevo nombre de usuario\"\r\n                        aria-label=\"Username\"\r\n                        aria-describedby=\"basic-addon1\"\r\n                        onChange={handleNUserChange}\r\n                        value={new_user}\r\n                    />\r\n                </InputGroup>\r\n            </Col>\r\n            <Col>\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Text id=\"basic-addon1\">P</InputGroup.Text>\r\n                    <Form.Control\r\n                        placeholder=\"Nueva contraseña\"\r\n                        aria-label=\"Password\"\r\n                        aria-describedby=\"basic-addon1\"\r\n                        type=\"password\"\r\n                        onChange={handleNPassChange}\r\n                        value={new_pass}\r\n                    />\r\n                </InputGroup>\r\n            </Col>\r\n\r\n            <Col>\r\n                <ImageUploading\r\n                    multiple\r\n                    value={images}\r\n                    onChange={onChange}\r\n                    maxNumber={maxNumber}\r\n                    dataURLKey=\"data_url\"\r\n                >\r\n                    {({\r\n                        imageList,\r\n                        onImageUpload,\r\n                        onImageRemoveAll,\r\n                        onImageUpdate,\r\n                        onImageRemove,\r\n                        isDragging,\r\n                        dragProps,\r\n                    }) => (\r\n                        // write your building UI\r\n                        <div className=\"upload__image-wrapper\">\r\n                            <Button\r\n                                onClick={onImageUpload}\r\n                                {...dragProps}\r\n                            >\r\n                                Cargue su imagen de perfil\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </ImageUploading>\r\n            </Col>\r\n\r\n            <Col>\r\n                <Button\r\n                    variant=\"primary\"\r\n                    size=\"m\"\r\n                    onClick={async () => {\r\n                        var im = `/imagenes/${new_user}.${images}`;\r\n                        if (`${images}` === \"\") {\r\n                            im = `/imagenes/default.jpg`;\r\n                        }\r\n                        const response = await fetch(\"http://localhost:5000/usuario\",\r\n                            {\r\n                                method: 'POST',\r\n                                mode: 'cors',\r\n                                headers: {\r\n                                    'Content-Type': 'application/json'\r\n                                },\r\n                                body: JSON.stringify({\r\n                                    \"nombre\": new_user,\r\n                                    \"contrasena\": new_pass,\r\n                                    \"imagen\": im\r\n                                })\r\n                            })\r\n                        if (response.ok) {\r\n                            console.log('Registrado');\r\n                        }\r\n                        else {\r\n                            alert('Seleccione otro nombre de usuario, ese ya se encuentra en nuestro sistema');\r\n                        }\r\n                    }}\r\n                >\r\n                    Registrase\r\n                </Button>\r\n\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\n\r\nexport default Registro;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}